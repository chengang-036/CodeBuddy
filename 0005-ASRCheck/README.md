# ASR质量抽检标注系统

一个专门用于人工智能ASR（自动语音识别）质量抽检的Web应用，帮助质检人员高效、准确地完成录音转写文本的标注工作。

## 🎯 核心功能

### 1. 音频播放器
- 📊 **音频波形图展示**：直观显示音频波形，支持点击跳转
- ⏯️ **完整播放控制**：播放/暂停、进度条、音量调节
- ⚡ **倍速播放**：支持0.5x-2.0x倍速，提高标注效率
- ⌨️ **快捷键支持**：空格键快速控制播放

### 2. 文本标注
- 🎨 **可视化标注**：鼠标选中文本即可标记错误
- 🏷️ **多种错误类型**：
  - 漏转（红色）- ASR漏识别的内容
  - 错转（橙色）- ASR识别错误的内容
  - 多转（绿色）- ASR多余识别的内容
  - 标点错误（蓝色）- 标点符号错误
  - 分词错误（紫色）- 分词不当
- ✏️ **修正输入**：可为错误文本输入正确内容
- 📝 **标注列表**：实时显示所有标注，支持删除修改

### 3. 质量评分
- ⭐ **整体评分**：1-5星评价转写质量
- 📊 **标注统计**：实时显示标注数量

### 4. 任务管理
- 📋 **任务队列**：自动加载待标注任务
- ⏭️ **跳过功能**：对无法判断的任务进行跳过并说明原因
- ✅ **一键提交**：保存标注结果并自动加载下一题
- 📈 **进度跟踪**：显示当前任务进度

### 5. 用户系统
- 👤 **用户登录**：标注员/管理员角色区分
- 🔐 **权限管理**：不同角色不同功能权限

### 6. 管理员功能
- 📤 **上传任务**：批量导入JSON格式任务数据
- 📥 **数据导出**：一键导出所有标注结果为JSON文件
- 📊 **统计报表**：查看错误类型分布、平均评分等统计数据

## 🚀 快速开始

### 直接使用
1. 在浏览器中打开 `index.html`
2. 使用用户名登录（标注员/管理员）
3. 开始标注任务

### 任务数据格式
任务数据为JSON数组格式，示例：

```json
[
  {
    "task_id": "case_001",
    "audio_url": "https://example.com/audio.mp3",
    "audio_file": "report_001.mp3",
    "case_time": "2024-01-15 14:30:00",
    "asr_engine": "AlibabaCloud ASR v3.2",
    "asr_text": "待标注的ASR转写文本内容..."
  }
]
```

### 标注结果格式
标注结果保存为结构化JSON：

```json
{
  "task_id": "case_001",
  "annotations": [
    {
      "id": 1704446400000,
      "start": 12,
      "end": 15,
      "text": "原文本",
      "error_type": "错转",
      "color": "#ffa500",
      "corrected_text": "修正文本",
      "annotator": "user_01"
    }
  ],
  "overall_rating": 4,
  "annotator": "user_01",
  "submitted_at": "2024-01-15T10:30:00.000Z"
}
```

## ⌨️ 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `空格` | 播放/暂停音频 |
| `1` | 标记为"漏转" |
| `2` | 标记为"错转" |
| `3` | 标记为"多转" |
| `4` | 标记为"标点错误" |
| `5` | 标记为"分词错误" |
| `Ctrl+S` | 提交当前任务 |
| `Ctrl+N` | 跳到下一题 |

## 📝 使用流程

### 标注员工作流程
1. **登录系统** - 输入用户名，选择"标注员"角色
2. **听录音** - 点击播放按钮，听取报案录音
3. **看文本** - 查看右侧的ASR转写文本
4. **标错误** - 用鼠标选中错误文本，选择错误类型，可输入修正文本
5. **给评分** - 为整体转写质量打1-5星
6. **提交** - 点击"提交并下一题"，自动加载下一个任务

### 管理员工作流程
1. **登录系统** - 选择"管理员"角色
2. **上传任务** - 点击右下角管理按钮，上传任务JSON文件
3. **查看统计** - 点击"统计报表"查看标注情况
4. **导出数据** - 点击"导出数据"下载所有标注结果

## 🎨 界面布局

### 左侧面板（固定450px）
- 任务信息卡片
- 音频播放器（含波形图）
- 快捷键提示

### 右侧面板（自适应）
- 文本标注区域（可滚动）
- 标注列表
- 评分和操作按钮

## 💾 数据存储

- 标注结果临时存储在浏览器 `localStorage`
- 管理员可随时导出为JSON文件
- 实际应用中建议对接后端API

## 🔧 技术特点

- ✅ 纯前端实现，无需后端即可运行
- ✅ 响应式设计，适配各种屏幕尺寸
- ✅ 现代化UI，美观易用
- ✅ 完整的键盘快捷键支持
- ✅ 实时保存，防止数据丢失
- ✅ 结构化数据输出，便于分析

## 📊 质检功能

### 错误类型统计
系统自动统计各类错误的数量和占比，帮助分析ASR系统的弱点：
- 漏转率
- 错转率
- 多转率
- 标点错误率
- 分词错误率

### 整体评分统计
统计所有任务的平均评分，评估ASR系统整体质量。

## 🎯 适用场景

- ASR系统质量评估
- 语音识别模型训练数据标注
- 客服录音转写质检
- 会议记录转写审核
- 司法录音文本校对

## 📄 许可

MIT License

---

**开发日期**: 2024-12-04  
**版本**: v1.0.0
